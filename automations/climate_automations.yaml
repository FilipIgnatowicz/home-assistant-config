##################################################
# AUTOMATIONS TO TURN DOWN HEAT FOR OPEN WINDOWS #
##################################################


- id: heat_down_open_living_room
  alias: 'Turn Heat Down In Living Room' 
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: state
    entity_id: sensor.back_door
    to: 'Open'
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 5
        
- id: heat_up_closed_living_room
  alias: 'Turn Heat Up In Living Room'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: state
    entity_id: sensor.back_door
    to: 'Closed'
  action:   
    - service: climate.set_preset_mode
      data:
        entity_id: climate.living_room
        preset_mode: 'none'
        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.living_room

- id: living_room_last_preset_mode
  alias: 'Living Room Last Mode'
  trigger:
    platform: state
    entity_id: climate.living_room
  action:
    service: input_select.select_option
    data_template:
      entity_id: input_select.living_room_last_preset_mode
      option: "{{ states[trigger.from_state.attributes.preset_mode] }}"
# ^^^^^^this is getting the from_state, but it's not matching the input select. 
# it gives this error: Invalid option: <template DomainStates('permanent')> (possible options: none, permanent, temporary)


#      option: '{{ trigger.from_state.state }}'

- id: living_room_last_temp
  alias: 'Living Room Last Temp'
  trigger:
    platform: state
    entity_id: climate.living_room
  action:
    service: input_number.set_value
    data_template:
      entity_id: input_number.living_room_last_temp
      value: "{{ states[trigger.from_state.attributes.temperature]|float }}"



######################################################
# AUTOMATIONS TO ADJUST HEAT BASED ON WEATHER REPORT #
######################################################



- id: warm_sunny_weather_heat_down
  alias: 'Turn Down Heat For Warm Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        above: 5
        below: 10
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        above: 13
        below: 20
      - condition: or
        conditions:
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'clear-day'
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.dining_room
        temperature: 20
    - service: climate.set_temperature
      data:
        entity_id: climate.entrance
        temperature: 18
    - service: climate.set_temperature
      data:
        entity_id: climate.garage
        temperature: 18
    - service: climate.set_temperature
      data:
        entity_id: climate.guest_bedroom
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 20
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bath
        temperature: 22
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bedroom
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.master_closet
        temperature: 22
    - service: climate.set_temperature
      data:
        entity_id: climate.office_library
        temperature: 21.5
    - service: climate.set_temperature
      data:
        entity_id: climate.sebastian_s_room
        temperature: 22
    - service: climate.set_temperature
      data:
        entity_id: climate.laundry_room
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.sophie_s_room
        temperature: 21 
    - service: climate.set_preset_mode
      data:
        entity_id: climate.laundry_room
        preset_mode: 'none'
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_down_in_living_room
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_up_in_living_room
#   - service: climate.set_preset_mode
#      data:
#        entity_id: climate.dining_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.entrance
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.garage
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.guest_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.living_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bath
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_closet
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.office_library
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sebastian_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sophie_s_room
#        preset_mode: 'permanent'

- id: warm_cloudy_weather_heat_down
  alias: 'Turn Down Heat For Warm Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        above: 7
        below: 10
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        above: 15
        below: 20
      - condition: or
        conditions:
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'partly-cloudy-day'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'rain'          
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'snow'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'sleet'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'wind'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'fog'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'cloudy'     
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.dining_room
        temperature: 20
    - service: climate.set_temperature
      data:
        entity_id: climate.entrance
        temperature: 18
    - service: climate.set_temperature
      data:
        entity_id: climate.garage
        temperature: 18
    - service: climate.set_temperature
      data:
        entity_id: climate.guest_bedroom
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bath
        temperature: 22
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bedroom
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.master_closet
        temperature: 22
    - service: climate.set_temperature
      data:
        entity_id: climate.office_library
        temperature: 21.5
    - service: climate.set_temperature
      data:
        entity_id: climate.sebastian_s_room
        temperature: 22
    - service: climate.set_temperature
      data:
        entity_id: climate.sophie_s_room
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.laundry_room
        temperature: 21     

    - service: climate.set_preset_mode
      data:
        entity_id: climate.laundry_room
        preset_mode: 'none'
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_down_in_living_room
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_up_in_living_room
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.dining_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.entrance
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.garage
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.guest_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.living_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bath
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_closet
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.office_library
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sebastian_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sophie_s_room
#        preset_mode: 'permanent'

#      - condition: template
#        value_template: '{{ states.sensor.dark_sky_overnight_low_temperature_0d > 5 }}'
#      - condition: template
#        value_template: '{{ sensor.dark_sky_daytime_high_temperature_0d > 13 }}'


                
- id: cold_weather_heat_auto_sunny
  alias: 'Turn Heat to Schedule in Cold Sunny Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        below: 5
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        below: 13
      - condition: or
        conditions:
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'clear-day'
  action:
    - service: climate.set_preset_mode
      data:
        entity_id: climate.dining_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.entrance
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.garage
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.guest_bedroom
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.living_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.master_bedroom
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.master_bath
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.master_closet
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.office_library
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.sebastian_s_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.sophie_s_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.laundry_room
        preset_mode: 'none'
    - service: homeassistant.turn_on
      entity_id: automation.turn_heat_down_in_living_room
    - service: homeassistant.turn_on
      entity_id: automation.turn_heat_up_in_living_room
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.dining_room
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.entrance
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.garage
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.guest_bedroom
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.laundry_room
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.master_bath
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.master_bedroom
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.master_closet
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.office_library
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.sebastian_s_room
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.sophie_s_room
#        
#    - service: climate.set_temperature
#      data:
#        entity_id: climate.laundry_room
#        
       
- id: cold_weather_heat_auto_cloudy
  alias: 'Turn Heat to Schedule in Cold Cloudy Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        below: 7
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        below: 15
      - condition: or
        conditions:
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'partly-cloudy-day'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'rain'          
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'snow'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'sleet'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'wind'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'fog'
          - condition: state
            entity_id: sensor.dark_sky_icon_0d
            state: 'cloudy'
  action:
    - service: climate.set_preset_mode
      data:
        entity_id: climate.dining_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.entrance
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.garage
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.guest_bedroom
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.living_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.master_bedroom
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.master_bath
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.master_closet
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.office_library
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.sebastian_s_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.sophie_s_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.laundry_room
        preset_mode: 'none'
    - service: homeassistant.turn_on
      entity_id: automation.turn_heat_down_in_living_room
    - service: homeassistant.turn_on
      entity_id: automation.turn_heat_up_in_living_room
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.dining_room
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.entrance
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.garage
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.guest_bedroom
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.laundry_room
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.master_bath
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.master_bedroom
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.master_closet
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.office_library
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.sebastian_s_room
#        
#    - service: climate.set_hvac_mode
#      data:
#        entity_id: climate.sophie_s_room
#        
#    - service: climate.set_temperature
#      data:
#        entity_id: climate.laundry_room
#        

- id: living_room_tepid_weather_heat_down
  alias: 'Turn Living Room Heat Down For Tepid Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        above: 2
        below: 10
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        above: 11
        below: 20
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 20
#        
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.living_room
#        preset_mode: 'permanent'
        
- id: living_room_warm_weather_heat_down
  alias: 'Turn Living Room Heat Down For Warm Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        above: 5
        below: 10
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        above: 13
        below: 20
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 18
#         
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.living_room
#        preset_mode: 'permanent'

- id: living_room_cold_weather_heat_up
  alias: 'Turn Living Room Heat Up For Cold Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        below: 2
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        below: 11
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        preset_mode: 'none'
        
#      - condition: template
#        value_template: '{{ states.sensor.dark_sky_overnight_low_temperature_0d < 5 }}'
#      - condition: template
#        value_template: '{{ sensor.dark_sky_daytime_high_temperature_0d < 13 }}'


#- id: living_room_last_temp
#  alias: 'Living Room Last Temp'
#  trigger:
#    platform: state
#    entity_id: climate.living_room
#  action:
#    service: variable.set_variable
#    data:
#      variable: living_room_last_temp_variable
#      value_template: "{{ states('sensor.climate.living_room')}}"
#      attributes_template: >
#        {
#          "temperature": "{{ state_attr('climate.living_room', 'temperature') }}",
#        }   

- id: warmer_weather_heat_down_more
  alias: 'Turn Down Heat For Warm Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        above: 10
        below: 13
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        above: 20
        below: 23
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.dining_room
        temperature: 18
        
    - service: climate.set_temperature
      data:
        entity_id: climate.entrance
        temperature: 16
        
    - service: climate.set_temperature
      data:
        entity_id: climate.garage
        temperature: 15
        
    - service: climate.set_temperature
      data:
        entity_id: climate.guest_bedroom
        temperature: 18
        
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 16
        
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bath
        temperature: 20
        
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bedroom
        temperature: 20
        
    - service: climate.set_temperature
      data:
        entity_id: climate.master_closet
        temperature: 20
        
    - service: climate.set_temperature
      data:
        entity_id: climate.office_library
        temperature: 20
        
    - service: climate.set_temperature
      data:
        entity_id: climate.sebastian_s_room
        temperature: 21
        
    - service: climate.set_temperature
      data:
        entity_id: climate.sophie_s_room
        temperature: 21
        
    - service: climate.set_temperature
      data:
        entity_id: climate.laundry_room
        temperature: 21

    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_down_in_living_room
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_up_in_living_room
#        
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.dining_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.entrance
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.garage
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.guest_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.living_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bath
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_closet
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.office_library
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sebastian_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sophie_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.laundry_room
#        preset_mode: 'permanent'

- id: warmer_weather_heat_down_more_2
  alias: 'Turn Down Heat For Warm Weather 2'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        above: 12
        below: 14
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        above: 23
        below: 25
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.dining_room
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.entrance
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.garage
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.guest_bedroom
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bath
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bedroom
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.master_closet
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.office_library
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.sebastian_s_room
        temperature: 18
    - service: climate.set_temperature
      data:
        entity_id: climate.sophie_s_room
        temperature: 18
    - service: climate.set_temperature
      data:
        entity_id: climate.laundry_room
        temperature: 19

    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_down_in_living_room
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_up_in_living_room
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.dining_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.entrance
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.garage
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.guest_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.living_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bath
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_closet
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.office_library
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sebastian_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sophie_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.laundry_room
#        preset_mode: 'permanent'

- id: hot_weather_turn_heat_off
  alias: 'Turn Heat Off For Hot Weather'
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '00:30:00'
  condition:
    condition: and
    conditions:
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_overnight_low_temperature_0d'
        above: 14
      - condition: numeric_state
        entity_id: 'sensor.dark_sky_daytime_high_temperature_0d'
        above: 25
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.dining_room
        temperature: 15  
    - service: climate.set_temperature
      data:
        entity_id: climate.entrance
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.garage
        temperature: 12
    - service: climate.set_temperature
      data:
        entity_id: climate.guest_bedroom
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bath
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.master_bedroom
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.master_closet
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.office_library
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.sebastian_s_room
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.sophie_s_room
        temperature: 15
    - service: climate.set_temperature
      data:
        entity_id: climate.laundry_room
        temperature: 12
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_down_in_living_room
    - service: homeassistant.turn_off
      entity_id: automation.turn_heat_up_in_living_room
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.dining_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.entrance
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.garage
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.guest_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.living_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bedroom
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_bath
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.master_closet
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.office_library
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sebastian_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.sophie_s_room
#        preset_mode: 'permanent'
#    - service: climate.set_preset_mode
#      data:
#        entity_id: climate.laundry_room
#        preset_mode: 'permanent'

- id: sophie_room_heat_up_if_home
  alias: "Turn up the heat in sophie's room if she's home"
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '7:50:00'
  condition:    
    condition: state
    entity_id: device_tracker.sophie
    state: 'home'
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.sophie_s_room
        temperature: 23
    - service: climate.set_preset_mode
      data:
        entity_id: climate.sophie_s_room
        preset_mode: 'permanent'  

- id: fire_in_fireplace_tomorrow
  alias: "Fire in Fireplace Tomorrow"
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: time
    at: '6:00:00'
  condition:    
    condition: state
    entity_id: input_boolean.fire_in_fireplace_tomorrow
    state: 'on'
  action:
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.fire_in_fireplace_tomorrow
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.fire_in_fireplace_now

- id: fire_in_fireplace_now
  alias: "Fire in Fireplace Now"
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: state
    entity_id: input_boolean.fire_in_fireplace_now
    to: 'on'
  action:
    - service: climate.set_temperature
      data:
        entity_id: climate.dining_room
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.entrance
        temperature: 21
    - service: climate.set_temperature
      data:
        entity_id: climate.living_room
        temperature: 21
    - service: climate.set_preset_mode
      data:
        entity_id: climate.dining_room
        preset_mode: 'permanent'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.entrance
        preset_mode: 'permanent'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.living_room
        preset_mode: 'permanent'

- id: fire_in_fireplace_now_turned_off
  alias: "Fire in Fireplace Now Off"
  hide_entity: true
  initial_state: 'true'
  trigger:
    platform: state
    entity_id: input_boolean.fire_in_fireplace_now
    to: 'off'
  action:
    - service: climate.set_preset_mode
      data:
        entity_id: climate.dining_room
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.entrance
        preset_mode: 'none'
    - service: climate.set_preset_mode
      data:
        entity_id: climate.living_room
        preset_mode: 'none'
